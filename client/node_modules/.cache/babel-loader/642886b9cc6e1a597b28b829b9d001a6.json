{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\benja\\\\Desktop\\\\app2000\\\\APP2000MovieSelector\\\\client\\\\src\\\\components\\\\Film\\\\MoviePref.js\",\n    _s = $RefreshSig$();\n\nimport { Col, Form, Button } from 'react-bootstrap';\nimport { useState, useEffect } from 'react';\nimport Slider from '@material-ui/core/Slider';\nimport Typography from '@material-ui/core/Typography';\nimport axios from 'axios';\nimport { useSelector } from 'react-redux';\nimport MoviePoster from './MoviePoster';\n/*\r\n    Forfatter: Benjamin Nese\r\n    Preferanse for hver bruker over hvilken kategori, år, og rating de vil se filmer fra\r\n*/\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst MoviePref = () => {\n  _s();\n\n  const [key, setKey] = useState('67eebbe4966f8175133a6a20f9206e7a');\n  const [language, setLanguage] = useState('en-US');\n  const [sort, setSort] = useState('popularity.desc');\n  const [year, setYear] = useState([1985, 2021]); // new Date(1995, 11, 17).toISOString().slice(0, 10), new Date(2021, 11, 17).toISOString().slice(0, 10)\n\n  const [rating, setRating] = useState([0, 10]);\n  const [pref, setPref] = useState([]);\n  const [moviePoster, setMoviePoster] = useState([]); //TODO sorter liste lokalt istendenfor via url\n  //Concat en link med de forskjellige preferansene endret, her skulle vi ha implementert en bedre løsning\n\n  let url = `https://api.themoviedb.org/3/discover/movie?api_key=${key}&language=${language}&sort_by=${sort}&include_adult=false&include_video=false&page=1&release_date.gte=${year[0]}-01-01&release_date.lte=${year[1]}-01-01&vote_count.gte=500&vote_average.gte=${rating[0]}&vote_average.lte=${rating[1]}&with_genres=${pref}`;\n  useEffect(() => {\n    console.log(url); //hent ut år\n\n    axios.get(url).then(res => {\n      console.log(res.data.results.map(movie => {\n        return movie.title + movie.vote_average;\n      }));\n      setMoviePoster(res.data.results.map(name => {\n        return /*#__PURE__*/_jsxDEV(MoviePoster, {\n          movie: name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 64\n        }, this);\n      }));\n    });\n  }, [rating]); //hver gang rating endres vil listen oppdateres\n\n  const reduxState = useSelector(state => state.auth); //hente state fra store\n  // useDispatch() for oppdatere\n\n  const onCheckedGenre = value => {\n    console.log(value);\n\n    if (!pref.includes(value)) {\n      //hvis preferanse allerede er i state\n      setPref([...pref, value]);\n    }\n  };\n\n  const onSavePref = e => {\n    e.preventDefault(); //Vil unngå at nettleser automatisk lastest på nytt\n\n    console.log(reduxState.epost);\n    const preferanse = {\n      //Opprett ny variabel som blir et database objekt\n      userId: reduxState.epost,\n      genres: //looper gjennom alle preferansene\n      pref.map(pre => {\n        return {\n          name: `${pre}`\n        };\n      }),\n      years: year.map(year => {\n        return {\n          year: `${year}`\n        };\n      }),\n      ratings: rating.map(rating => {\n        return {\n          rating: `${rating}`\n        };\n      })\n    }; //Ny preferanse blir lastet opp til databasen via axios\n\n    console.log(\"kjører axios \", axios.post('http://localhost:3000/movie_pref/add', preferanse)); //Skulle her ha lagt inn en sjekk for om bruker har preferanse inne, for så å heller oppdatert den\n\n    axios.post('http://localhost:3000/movie_pref/add', preferanse).then(res => {\n      console.log(preferanse);\n      console.log('fra moviepref.js: ', res);\n    });\n    alert(\"Lagret\"); //window.location ='/'; //sender bruker tilbake når trykket lagre\n  }; //Test for å hente ut preferansene fra mongoDB\n  //TODO Funker ikke \n\n\n  const hent = e => {\n    e.preventDefault();\n    axios.get(`http://localhost:3000/movie_pref/${reduxState.epost}`).then(res => {\n      for (var i = 0; i < res.data.genres.length; i++) document.getElementById(res.data.genres[i].name).checked = true; //Setter alle checkbokser fra \n      //mongoDB til sant\n\n\n      setRating(res.data.ratings.map(rating => rating));\n      setYear(res.data.years.map(year => year.year));\n      console.log();\n    });\n  }; //Test for å hente alle filmprefeanser i databasen\n\n\n  const hentAlle = () => {\n    axios.get(`http://localhost:3000/movie_pref`).then(res => {\n      console.log(\"kjører hentalle\");\n      console.log(res.data);\n    });\n  };\n\n  const slettAlle = () => {\n    axios.get();\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-2 mb-5 bg-white\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-center\",\n      children: \"Film Preferanse\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Form, {\n      children: [/*#__PURE__*/_jsxDEV(Form.Row, {\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"Sort\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            as: \"select\",\n            defaultValue: \"Popularity Desecending\",\n            onChange: e => setSort(e.target.options[e.target.options.selectedIndex].value),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"popularity.desc\",\n              children: \"Popularity\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"vote_average.desc\",\n              children: \"Rating\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"release_date.desc\",\n              children: \"Release Date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Form.Row, {\n        className: \"m-2\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Check, {\n          type: \"checkbox\",\n          label: \"Action\",\n          id: \"28\",\n          value: \"28\",\n          onChange: e => onCheckedGenre(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Form.Check, {\n          type: \"checkbox\",\n          label: \"Adventure\",\n          id: \"12\",\n          value: \"12\",\n          onChange: e => onCheckedGenre(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Form.Check, {\n          type: \"checkbox\",\n          label: \"Animation\",\n          id: \"16\",\n          value: \"16\",\n          onChange: e => onCheckedGenre(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Form.Row, {\n        className: \"m-2\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Check, {\n          type: \"checkbox\",\n          label: \"Comedy\",\n          id: \"35\",\n          value: \"35\",\n          onChange: e => onCheckedGenre(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Form.Check, {\n          type: \"checkbox\",\n          label: \"Thriller\",\n          id: \"53\",\n          value: \"53\",\n          onChange: e => onCheckedGenre(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Form.Check, {\n          type: \"checkbox\",\n          label: \"Romance\",\n          id: \"10749\",\n          value: \"10749\",\n          onChange: e => onCheckedGenre(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        id: \"range-year\",\n        children: [/*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"Year:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 17\n        }, this), \" \", year[0], \"-\", year[1]]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Slider, {\n        style: {\n          width: 300\n        },\n        valueLabelDisplay: \"auto\",\n        \"aria-labelledby\": \"range-year\",\n        value: year,\n        min: 1985,\n        max: 2021,\n        onChange: (e, value) => setYear(value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        id: \"range-rating\",\n        children: [/*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"Rating:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 17\n        }, this), \" \", rating[0], \"-\", rating[1]]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Slider, {\n        style: {\n          width: 300\n        },\n        valueLabelDisplay: \"auto\",\n        \"aria-labelledby\": \"range-rating\",\n        value: rating,\n        min: 0,\n        max: 10,\n        onChange: (e, value) => setRating(value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      onClick: e => onSavePref(e),\n      children: \"lagre\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      onClick: e => hent(e),\n      children: \"hent\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"p1\",\n      children: moviePoster[Math.floor(Math.random() * 5)]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 124,\n    columnNumber: 9\n  }, this);\n};\n\n_s(MoviePref, \"e49FG2HT9vfrnsBpG2vqM/nwJVc=\", false, function () {\n  return [useSelector];\n});\n\n_c = MoviePref;\nexport default MoviePref; //TODO FIKS FOKUS PÅ HVILKEN KNAPP, SAMT GENERALISER DE I RANGEBAR\n// const RangeBar =(props) =>{\n//     return(\n//      <div>\n//         <Typography id={props.id}>\n//             <b>{props.title}:</b>\n//         </Typography>   \n//         <Slider\n//             style={{width:300}}\n//             valueLabelDisplay=\"auto\"\n//             aria-labelledby=\"year\"\n//             value={props.value}\n//             min={props.min}\n//             max={props.max}\n//             onChange={(e)=>handleChange}\n//          />\n//     </div>\n//     )\n// }\n\nvar _c;\n\n$RefreshReg$(_c, \"MoviePref\");","map":{"version":3,"sources":["C:/Users/benja/Desktop/app2000/APP2000MovieSelector/client/src/components/Film/MoviePref.js"],"names":["Col","Form","Button","useState","useEffect","Slider","Typography","axios","useSelector","MoviePoster","MoviePref","key","setKey","language","setLanguage","sort","setSort","year","setYear","rating","setRating","pref","setPref","moviePoster","setMoviePoster","url","console","log","get","then","res","data","results","map","movie","title","vote_average","name","reduxState","state","auth","onCheckedGenre","value","includes","onSavePref","e","preventDefault","epost","preferanse","userId","genres","pre","years","ratings","post","alert","hent","i","length","document","getElementById","checked","hentAlle","slettAlle","target","options","selectedIndex","width","Math","floor","random"],"mappings":"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","sourcesContent":["import {Col, Form, Button} from 'react-bootstrap';\r\nimport {useState, useEffect} from 'react';\r\nimport Slider from '@material-ui/core/Slider';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport axios from 'axios';\r\nimport {useSelector} from 'react-redux';\r\nimport MoviePoster from './MoviePoster';\r\n\r\n/*\r\n    Forfatter: Benjamin Nese\r\n    Preferanse for hver bruker over hvilken kategori, år, og rating de vil se filmer fra\r\n*/\r\nconst MoviePref = () =>{\r\n\r\n    const [key, setKey] = useState ('67eebbe4966f8175133a6a20f9206e7a');\r\n    const [language, setLanguage] = useState('en-US')\r\n    const [sort, setSort] = useState('popularity.desc');\r\n    const [year, setYear] = useState([1985,2021]); \r\n    // new Date(1995, 11, 17).toISOString().slice(0, 10), new Date(2021, 11, 17).toISOString().slice(0, 10)\r\n    const [rating, setRating] = useState([0,10]);\r\n    const [pref, setPref] = useState([]);\r\n    const [moviePoster, setMoviePoster] = useState([]);\r\n\r\n    //TODO sorter liste lokalt istendenfor via url\r\n\r\n    //Concat en link med de forskjellige preferansene endret, her skulle vi ha implementert en bedre løsning\r\n    let url = `https://api.themoviedb.org/3/discover/movie?api_key=${key}&language=${language}&sort_by=${sort}&include_adult=false&include_video=false&page=1&release_date.gte=${year[0]}-01-01&release_date.lte=${year[1]}-01-01&vote_count.gte=500&vote_average.gte=${rating[0]}&vote_average.lte=${rating[1]}&with_genres=${pref}`;\r\n  \r\n    useEffect (()=>{\r\n        console.log(url); //hent ut år\r\n        axios.get(url)\r\n        .then(res =>{\r\n            console.log(res.data.results.map(movie=>{return (movie.title +  movie.vote_average)}));\r\n            setMoviePoster(res.data.results.map(name=>{return (<MoviePoster movie = {name} ></MoviePoster> )}));\r\n        });\r\n    },[rating]); //hver gang rating endres vil listen oppdateres\r\n\r\n    \r\n    const reduxState = useSelector((state) => state.auth); //hente state fra store\r\n                    // useDispatch() for oppdatere\r\n \r\n    \r\n    const onCheckedGenre =(value) =>{\r\n        console.log(value);\r\n        if(!pref.includes(value)) { //hvis preferanse allerede er i state\r\n            setPref([...pref, value])\r\n        }\r\n    }\r\n\r\n    const onSavePref =(e) =>{\r\n        e.preventDefault(); //Vil unngå at nettleser automatisk lastest på nytt\r\n        console.log(reduxState.epost);\r\n            const preferanse ={ //Opprett ny variabel som blir et database objekt\r\n                userId: reduxState.epost,\r\n                genres: ( //looper gjennom alle preferansene\r\n                    pref.map(pre =>{\r\n                        return(\r\n                            {name: `${pre}`}\r\n                        )\r\n                    })\r\n                ),\r\n                years : (\r\n                    year.map(year =>{\r\n                        return(\r\n                            {year: `${year}`}\r\n                        )\r\n                    })\r\n                ),   \r\n                ratings : (\r\n                    rating.map(rating =>{\r\n                        return(\r\n                            {rating: `${rating}`}\r\n                        )\r\n                    })\r\n                ),  \r\n            }\r\n      \r\n\r\n        //Ny preferanse blir lastet opp til databasen via axios\r\n        console.log(\"kjører axios \", axios.post('http://localhost:3000/movie_pref/add', preferanse));\r\n        //Skulle her ha lagt inn en sjekk for om bruker har preferanse inne, for så å heller oppdatert den\r\n        axios.post('http://localhost:3000/movie_pref/add', preferanse)\r\n            .then(res => {\r\n                console.log(preferanse);\r\n                console.log('fra moviepref.js: ', res)\r\n            });\r\n               \r\n\r\n        alert(\"Lagret\");\r\n        //window.location ='/'; //sender bruker tilbake når trykket lagre\r\n       \r\n    }\r\n\r\n    //Test for å hente ut preferansene fra mongoDB\r\n    //TODO Funker ikke \r\n    const hent= (e) =>{\r\n        e.preventDefault();\r\n        \r\n        axios.get(`http://localhost:3000/movie_pref/${reduxState.epost}`)\r\n        .then(res => {\r\n            for(var i = 0; i < res.data.genres.length;i++)\r\n                document.getElementById(res.data.genres[i].name).checked = true; //Setter alle checkbokser fra \r\n                                                                                 //mongoDB til sant\r\n            setRating(res.data.ratings.map(rating=>rating));                                                                  \r\n            setYear(res.data.years.map(year=>year.year));      \r\n            console.log()                                                           \r\n        });\r\n    };\r\n\r\n    //Test for å hente alle filmprefeanser i databasen\r\n    const hentAlle=() =>{\r\n        axios.get(`http://localhost:3000/movie_pref`)\r\n        .then(res => {\r\n            console.log(\"kjører hentalle\")\r\n            console.log(res.data);\r\n        });\r\n    };\r\n    const slettAlle=() =>{\r\n        axios.get()\r\n    }\r\n\r\n   \r\n    return(\r\n        <div className=\"p-2 mb-5 bg-white\">\r\n            <h1 className=\"text-center\">Film Preferanse</h1>\r\n            <Form>\r\n            <Form.Row>\r\n            <Col>\r\n                <Form.Label>Sort</Form.Label>\r\n                <Form.Control as=\"select\" defaultValue=\"Popularity Desecending\" onChange={(e)=>setSort(e.target.options[e.target.options.selectedIndex].value)}>\r\n                    <option value=\"popularity.desc\">Popularity</option>\r\n                    <option value=\"vote_average.desc\">Rating</option>\r\n                    <option value=\"release_date.desc\">Release Date</option>\r\n                </Form.Control>\r\n            </Col>\r\n            </Form.Row>\r\n            <Form.Row className =\"m-2\">\r\n                <Form.Check type=\"checkbox\" label=\"Action\" id=\"28\" value={\"28\"}  onChange={(e)=>onCheckedGenre(e.target.value)}/>\r\n                <Form.Check type=\"checkbox\" label=\"Adventure\" id=\"12\" value={\"12\"}  onChange={(e)=>onCheckedGenre(e.target.value)}/>\r\n                <Form.Check type=\"checkbox\" label=\"Animation\" id=\"16\" value={\"16\"}  onChange={(e)=>onCheckedGenre(e.target.value)}/>\r\n                \r\n            </Form.Row>\r\n            <Form.Row className =\"m-2\">\r\n                <Form.Check type=\"checkbox\" label=\"Comedy\" id=\"35\" value={\"35\"}  onChange={(e)=>onCheckedGenre(e.target.value)}/>  \r\n                <Form.Check type=\"checkbox\" label=\"Thriller\" id=\"53\" value={\"53\"}  onChange={(e)=>onCheckedGenre(e.target.value)}/>\r\n                <Form.Check type=\"checkbox\" label=\"Romance\" id=\"10749\" value={\"10749\"}  onChange={(e)=>onCheckedGenre(e.target.value)}/>  \r\n            </Form.Row>\r\n            {/* <RangeBar \r\n            title=\"Year\" \r\n            id=\"year\" \r\n            min={1985} \r\n            max={2021} \r\n            ref={valgSlider} \r\n            onChange={fokus}\r\n            /> */}\r\n        \r\n            <Typography id=\"range-year\">\r\n                <b>Year:</b> {year[0]}-{year[1]}\r\n            </Typography>   \r\n        <Slider \r\n                style={{width:300}}\r\n                valueLabelDisplay=\"auto\"\r\n                aria-labelledby=\"range-year\"\r\n                value={year}\r\n                min={1985}\r\n                max={2021}\r\n                onChange={(e, value)=>setYear(value)}\r\n        />\r\n        <Typography id=\"range-rating\">\r\n                <b>Rating:</b> {rating[0]}-{rating[1]}\r\n            </Typography>   \r\n        <Slider \r\n                style={{width:300}}\r\n                valueLabelDisplay=\"auto\"\r\n                aria-labelledby=\"range-rating\"\r\n                value={rating}\r\n                min={0}\r\n                max={10}\r\n                onChange={(e, value)=>setRating(value)}\r\n        />\r\n        </Form>\r\n                <Button onClick={(e) => onSavePref(e)}>lagre</Button>\r\n                <Button onClick={(e) => hent(e)}>hent</Button>\r\n                <div id=\"p1\">{moviePoster[Math.floor(Math.random() * 5)]}</div>\r\n      </div>\r\n    );\r\n};\r\nexport default MoviePref;\r\n\r\n //TODO FIKS FOKUS PÅ HVILKEN KNAPP, SAMT GENERALISER DE I RANGEBAR\r\n\r\n    // const RangeBar =(props) =>{\r\n    //     return(\r\n    //      <div>\r\n    //         <Typography id={props.id}>\r\n    //             <b>{props.title}:</b>\r\n    //         </Typography>   \r\n    //         <Slider\r\n    //             style={{width:300}}\r\n    //             valueLabelDisplay=\"auto\"\r\n    //             aria-labelledby=\"year\"\r\n    //             value={props.value}\r\n    //             min={props.min}\r\n    //             max={props.max}\r\n    //             onChange={(e)=>handleChange}\r\n    //          />\r\n    //     </div>\r\n    //     )\r\n    // }"]},"metadata":{},"sourceType":"module"}